@{
  Layout = "_Layout";
}

@model PierreTreats.Models.Treat;

<span class="header">Treat details</span>

<hr>

<div class="contentbox">
  <h3>Treat @Html.DisplayNameFor(model => model.Name): @Html.DisplayFor(model => model.Name)</h3>
  <h3>@Html.DisplayNameFor(model => model.Description): @Html.DisplayFor(model => model.Description)</h3>
  <h3>@Html.DisplayNameFor(model => model.Price): $@Html.DisplayFor(model => model.Price)</h3>

  <hr>

  <div class="center">
    @if (@Model.JoinEntities.Count == 0)
    {
      <p>This treat does not have any associated flavors yet</p>
    }
    else
    {
      <h4>Flavors associated with this treat:</h4>

      <ul>
        @foreach (var join in Model.JoinEntities)
        {
          <hr>
          <li>@Html.ActionLink($"{@join.Flavor.Name}", "Details", "Flavors", new { id = join.Flavor.FlavorId }) | Flavor
            Rating:
            @for (int i = 0; i < (int)(join.Flavor.Rating + 1); i++)
            {
              <img src="~/img/star.png" height="20px">
            }
            @using (Html.BeginForm("DeleteFlavor", "Treats"))
            {
              @Html.Hidden("joinId", @join.FlavorTreatId)
              <input type="submit" value="Remove Flavor" class="btn btn-danger">
            }
          </li>
        }
      </ul>
    }
  </div>
</div>

<div class="navbar">
  @Html.ActionLink("Add Flavor to Treat", "AddFlavor", new { id = Model.TreatId })
  <span class="padding"><img src="~/img/star.png" height="20px"></span>
  @Html.ActionLink("Edit Treat", "Edit", new { id = Model.TreatId })
  <span class="padding"><img src="~/img/star.png" height="20px"></span>
  @Html.ActionLink("Delete Treat", "Delete", new { id = Model.TreatId })
  <span class="padding"><img src="~/img/star.png" height="20px"></span>
  @Html.ActionLink("Back to All Treats", "Index")
</div>